[gd_scene load_steps=15 format=3 uid="uid://dsdafmm8uboj3"]

[ext_resource type="PackedScene" uid="uid://hwjqp78r3gpa" path="res://assets/levels/models/room_main.tscn" id="1_xlv32"]
[ext_resource type="Environment" uid="uid://dgn7yadiyci1m" path="res://levels/environment_0.tres" id="2_bbvwo"]
[ext_resource type="PackedScene" uid="uid://lbyfu5tppd00" path="res://characters/player/player.tscn" id="3_xlv32"]
[ext_resource type="Script" uid="uid://bkhvmkrwodyya" path="res://objects/ritual_area.gd" id="4_dt74c"]
[ext_resource type="PackedScene" uid="uid://cedotbanlwp23" path="res://objects/combination_creator.tscn" id="5_wn8mm"]
[ext_resource type="PackedScene" uid="uid://blha2pgibs2lf" path="res://UI/qte_game.tscn" id="6_dsdcb"]
[ext_resource type="PackedScene" uid="uid://b0dqmv5mn3a8u" path="res://objects/demon_summoner.tscn" id="7_c2lvv"]
[ext_resource type="Script" uid="uid://bp6w7frh5jdyk" path="res://objects/ritual.gd" id="7_wn8mm"]
[ext_resource type="Texture2D" uid="uid://dxvv8weavsw3p" path="res://icon.svg" id="8_nehim"]
[ext_resource type="PackedScene" uid="uid://tr2gnn5ud7dr" path="res://global/trigger.tscn" id="9_5c206"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_dt74c"]
radius = 1.1

[sub_resource type="CylinderMesh" id="CylinderMesh_dt74c"]
top_radius = 1.1
bottom_radius = 1.1

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_wn8mm"]
transparency = 4
albedo_color = Color(1, 0.43333334, 0, 0.23921569)

[sub_resource type="GDScript" id="GDScript_wn8mm"]
script/source = "extends Label3D




func _on_ritual_action_maked(act: String) -> void:
	text = act
"

[node name="MainRoom" type="Node3D"]

[node name="RoomMain" parent="." instance=ExtResource("1_xlv32")]

[node name="OmniLight3D" type="OmniLight3D" parent="RoomMain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9971597, 0)
light_color = Color(1, 0.7276667, 0.57, 1)
light_energy = 15.492
light_size = 1.0
light_specular = 0.0
light_bake_mode = 1
shadow_enabled = true
shadow_opacity = 0.67
shadow_blur = 1.8
omni_range = 4096.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="RoomMain"]
environment = ExtResource("2_bbvwo")

[node name="Player" parent="." instance=ExtResource("3_xlv32")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.506918, 9.1106534e-07, 19.446947)

[node name="RitualArea" type="Node3D" parent="."]
script = ExtResource("4_dt74c")

[node name="CombinationCreator" parent="RitualArea" instance=ExtResource("5_wn8mm")]

[node name="QTEGame" parent="RitualArea" node_paths=PackedStringArray("player") instance=ExtResource("6_dsdcb")]
player = NodePath("../../Player")

[node name="Ritual" type="Node" parent="RitualArea"]
script = ExtResource("7_wn8mm")

[node name="ActionRestTimer" type="Timer" parent="RitualArea/Ritual"]
process_callback = 0
one_shot = true

[node name="DemonSummoner" parent="RitualArea" instance=ExtResource("7_c2lvv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="Decal" type="Decal" parent="RitualArea"]
texture_albedo = ExtResource("8_nehim")
cull_mask = 1

[node name="Trigger" parent="RitualArea" instance=ExtResource("9_5c206")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 5)

[node name="PlayerPosition" type="Marker3D" parent="RitualArea/Trigger"]
transform = Transform3D(1, 0, 0, 0, 0.99050945, 0.13744454, 0, -0.13744454, 0.99050945, 0, -1, 0)
gizmo_extents = 1.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="RitualArea/Trigger"]
shape = SubResource("CylinderShape3D_dt74c")

[node name="DebugTriggerShape" type="MeshInstance3D" parent="RitualArea/Trigger"]
mesh = SubResource("CylinderMesh_dt74c")
surface_material_override/0 = SubResource("StandardMaterial3D_wn8mm")

[node name="ActionLabel" type="Label3D" parent="RitualArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5687656, 0)
billboard = 1
script = SubResource("GDScript_wn8mm")

[connection signal="action_maked" from="RitualArea/Ritual" to="RitualArea/QTEGame" method="_on_ritual_action_maked"]
[connection signal="action_maked" from="RitualArea/Ritual" to="RitualArea/ActionLabel" method="_on_ritual_action_maked"]
[connection signal="started" from="RitualArea/Ritual" to="RitualArea/QTEGame" method="_on_ritual_started"]
[connection signal="player_entered" from="RitualArea/Trigger" to="RitualArea" method="_on_trigger_player_entered"]
